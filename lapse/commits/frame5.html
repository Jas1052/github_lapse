<!DOCTYPE html><html><head><link rel='shortcut icon' href='../../www/img/favicon.ico' type='image/x-icon'/></head><body style='width:100%;height:100%;background-color:white;'><div style='font-family:Segoe UI;color:blue;font-size:50px;position:absolute;top:0;left:15px;'>5</div><div style='align-items:center;justify-content:center;'><pre><link rel='stylesheet' href='php-diff/examples/styles.css' type='text/css' charset='utf-8'/><table class="Differences DifferencesInline"><thead><tr><th>Old</th><th>New</th><th>Differences</th></tr></thead><tbody class="ChangeEqual"><tr><th>10</th><th>10</th><td class="Left">- Start any services needed by your tests</td></tr><tr><th>11</th><th>11</th><td class="Left">- Run between-test cleanup of these services</td></tr><tr><th>12</th><th>12</th><td class="Left">- Start up multiple services for testing in the right order</td></tr></tbody><tbody class="ChangeInsert"><tr><th>&nbsp;</th><th>13</th><td class="Right"><ins>- Create test scoped bindings</ins>&nbsp;</td></tr></tbody><tbody class="ChangeEqual"><tr><th>13</th><th>14</th><td class="Left"></td></tr><tr><th>14</th><th>15</th><td class="Left">Acai is designed for large functional tests of your application. For</td></tr><tr><th>15</th><th>16</th><td class="Left">example it can help with writing tests which start your backend and frontend</td></tr></tbody><tbody class="Skipped"><th>&hellip;</th><th>&hellip;</th><td>&nbsp;</td></tbody><tbody class="ChangeEqual"><tr><th>168</th><th>169</th><td class="Left">`@DependsOn(MyBackendRunner.class)` which will cause Acai to start the</td></tr><tr><th>169</th><th>170</th><td class="Left">backend server before starting the frontend.</td></tr><tr><th>170</th><th>171</th><td class="Left"></td></tr></tbody><tbody class="ChangeInsert"><tr><th>&nbsp;</th><th>172</th><td class="Right"><ins>## Test scoped bindings</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>173</th><td class="Right"><ins>Occasionally you may wish to have one instance of a class per test and inject</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>174</th><td class="Right"><ins>this instance in multiple places in the object graph. In this case Guice's</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>175</th><td class="Right"><ins>default instance scope will not do. Fortunately Acai provides a `@TestScoped`</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>176</th><td class="Right"><ins>annotation which can be used to achieve exactly this.</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>177</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>178</th><td class="Right"><ins>For example we may define a module for using Webdriver (a popular browser</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>179</th><td class="Right"><ins>automation tool) in our tests like so:</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>180</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>181</th><td class="Right"><ins>```java</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>182</th><td class="Right"><ins>class WebdriverModule extends AbstractModule {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>183</th><td class="Right"><ins>&nbsp;private static final Duration MAX_WAIT = Duration.standardSeconds(5);</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>184</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>185</th><td class="Right"><ins>&nbsp;@Override</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>186</th><td class="Right"><ins>&nbsp;protected void configure() {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>187</th><td class="Right"><ins>&nbsp; &nbsp;install(new TestingServiceModule() {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>188</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp;@Override protected void configureTestingServices() {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>189</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp; &nbsp;bindTestingService(WebDriverQuitter.class);</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>190</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>191</th><td class="Right"><ins>&nbsp; &nbsp;});</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>192</th><td class="Right"><ins>&nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>193</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>194</th><td class="Right"><ins>&nbsp;@Provides</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>195</th><td class="Right"><ins>&nbsp;@TestScoped</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>196</th><td class="Right"><ins>&nbsp;private WebDriver provideWebDriver() {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>197</th><td class="Right"><ins>&nbsp; &nbsp;// Provide the driver here; precisely one instance will be</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>198</th><td class="Right"><ins>&nbsp; &nbsp;// created per test case.</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>199</th><td class="Right"><ins>&nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>200</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>201</th><td class="Right"><ins>&nbsp;@Provides</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>202</th><td class="Right"><ins>&nbsp;WebDriverWait provideWait(WebDriver webDriver) {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>203</th><td class="Right"><ins>&nbsp; &nbsp;return new WebDriverWait(webDriver, MAX_WAIT.getStandardSeconds());</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>204</th><td class="Right"><ins>&nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>205</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>206</th><td class="Right"><ins>&nbsp;static class WebDriverQuitter implements TestingService {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>207</th><td class="Right"><ins>&nbsp; &nbsp;@Inject Provider&lt;WebDriver&gt; webDriver;</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>208</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>209</th><td class="Right"><ins>&nbsp; &nbsp;@AfterTest void quitWebDriver() throws Exception {</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>210</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp;// Calling get on the Provider here returns the instance</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>211</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp;// for the test case which we are currently tearing down.</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>212</th><td class="Right"><ins>&nbsp; &nbsp; &nbsp;webDriver.get().quit();</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>213</th><td class="Right"><ins>&nbsp; &nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>214</th><td class="Right"><ins>&nbsp;}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>215</th><td class="Right"><ins>}</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>216</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>217</th><td class="Right"><ins>```</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>218</th><td class="Right"><ins></ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>219</th><td class="Right"><ins>One important point to note when using `@TestScoped` bindings is that</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>220</th><td class="Right"><ins>`TestingService` instances are instantiated once for all tests outside of test</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>221</th><td class="Right"><ins>scope. Therefore if you wish to access `@TestScoped` bindings in a</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>222</th><td class="Right"><ins>`@BeforeTest` or `@AfterTest` method you should inject a `Provider` and call</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>223</th><td class="Right"><ins>`get` on it within those methods as shown in the above example.</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>224</th><td class="Right"><ins></ins>&nbsp;</td></tr></tbody><tbody class="ChangeEqual"><tr><th>171</th><th>225</th><td class="Left">## API</td></tr></tbody><tbody class="ChangeReplace"><tr><th>172</th><th>&nbsp;</th><td class="Left"><span>As shown in the above examples Acai has a <del>ver</del>y small API surface.</span></td></tr><tr><th>&nbsp;</th><th>226</th><td class="Right"><span>As shown in the above examples Acai has a <ins>relativel</ins>y small API surface.</span></td></tr></tbody><tbody class="ChangeEqual"><tr><th>173</th><th>227</th><td class="Left">Firstly, and most importantly, there is the `Acai` rule class itself</td></tr><tr><th>174</th><th>228</th><td class="Left">which is used as a JUnit4 `@Rule` and is passed a module class to be used to</td></tr><tr><th>175</th><th>229</th><td class="Left">configure the test.</td></tr></tbody><tbody class="Skipped"><th>&hellip;</th><th>&hellip;</th><td>&nbsp;</td></tbody><tbody class="ChangeEqual"><tr><th>185</th><th>239</th><td class="Left">many methods annotated with these annotations as you wish to a</td></tr><tr><th>186</th><th>240</th><td class="Left">`TestingService`; Acai will find and run them all when appropriate.</td></tr><tr><th>187</th><th>241</th><td class="Left"></td></tr></tbody><tbody class="ChangeInsert"><tr><th>&nbsp;</th><th>242</th><td class="Right"><ins>For more advanced use-cases where instance scope is not sufficient the</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>243</th><td class="Right"><ins>`@TestScoped` annotation can be used to create one instance of a class per test</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>244</th><td class="Right"><ins>case.</ins>&nbsp;</td></tr><tr><th>&nbsp;</th><th>245</th><td class="Right"><ins></ins>&nbsp;</td></tr></tbody><tbody class="ChangeEqual"><tr><th>188</th><th>246</th><td class="Left">Finally a `TestingService` implementation can be annotated `@DependsOn` to</td></tr><tr><th>189</th><th>247</th><td class="Left">signal its `@BeforeSuite` and `@BeforeTest` methods need to be run after</td></tr><tr><th>190</th><th>248</th><td class="Left">those of another `TestingService`. This provides a simple declarative mechanism</td></tr></tbody></table></pre></div></body></html><script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script><script>
    document.onkeydown = checkKey;
    function checkKey(e) {
        e = e || window.event;
      if (e.keyCode == '37') {
          var fileName = location.href.split('/').slice(-1); 
          fileName = fileName.toString();
          var dotIndex = fileName.indexOf('.');
          fileCount = fileName.substring(5, dotIndex);
          var count = parseInt(fileCount);
          count--;
          if(count>0){
            document.location.href = 'frame' + count + '.html';
         }
        }
        else if (e.keyCode == '39') {
           // right arrow
           var fileName = location.href.split('/').slice(-1); 
           fileName = fileName.toString();
           var dotIndex = fileName.indexOf('.');
           fileCount = fileName.substring(5, dotIndex);
           var count = parseInt(fileCount);
           count++;
          $.get('frame'+count+'.html')
            .done(function() { 
              document.location.href = 'frame' + count + '.html';
            }).fail(function() { 
                  // not exists code
            })
          }
      }

    </script>